<!DOCTYPE html>
<html  lang="zh_CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>环境要求</title>
    
      <link rel="stylesheet" href="../_static/pygments.css">
      <link rel="stylesheet" href="../_static/theme.css">
      
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

      <!-- sphinx script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>

      
      <script src="../_static/theme-vendors.js"></script>
      <script src="../_static/theme.js" defer></script>
    
  <link rel="index" title="索引" href="../genindex.html" />
  <link rel="search" title="搜索" href="../search.html" />
  <link rel="next" title="项目部署记录" href="example.html" />
  <link rel="prev" title="开发文档" href="../dev/index.html" /> 
  </head>

  <body><div id="app" class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../index.html" class="home-link">
    
      <span class="site-name">monitoring</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">快速搜索</span>
    <div class="searchformwrapper">
      <form class="search" action="../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="搜索" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../contents.html#id1">目录</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 "><a href="../main/index.html" class="reference internal ">项目设计</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../dev/index.html" class="reference internal ">开发文档</a>

            
          </li>

        
          <li class="toctree-l1 current"><a href="#" class="reference internal current">环境要求</a>

            
              <ul>
                
                  <li class="toctree-l2"><a href="#id1" class="reference internal">环境要求</a></li>
                
                  <li class="toctree-l2"><a href="#python" class="reference internal">安装python第三方库</a></li>
                
                  <li class="toctree-l2"><a href="#id2" class="reference internal">配置文件</a></li>
                
                  <li class="toctree-l2"><a href="#id4" class="reference internal">运行</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 "><a href="example.html" class="reference internal ">项目部署记录</a>

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../contents.html">目录</a> &raquo;</li>
    
    <li>环境要求</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="../dev/index.html"
       title="上一章">← 开发文档</a>
  </li>
  <li class="next">
    <a href="example.html"
       title="下一章">项目部署记录 →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main">
            
  <div class="toctree-wrapper compound" id="deploy">
</div>
<div class="section" id="id1">
<h1>环境要求<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>目前支持部署环境仅 <strong>Linux</strong> 和 <strong>mac</strong> 且系统中必须安装Google chrome 64版本，或者需要将对应的chromedriver放入到项目执行路径下。</p>
<p>部署前需要准备的是</p>
<ol class="arabic simple">
<li><p>postgresql 数据库，创建monitoring数据库，并支持hstore</p></li>
<li><p>redis 数据库，将用于队列存储。如、celery的消息队列、在后续可以用于爬虫的url队列、搭建分布式爬虫。</p></li>
<li><p>python3 和 pip3</p></li>
</ol>
</div>
<div class="section" id="python">
<h1>安装python第三方库<a class="headerlink" href="#python" title="永久链接至标题">¶</a></h1>
<p>一般的我们在开发环境会为将功能细分、将python环境分割开，避免第三方库的版本冲突，或是因为系统升级导致不必要的问题。那么在生产环境，我们默认系统不会升级(最多打安全补丁)，当然可以自行创建python环境，用于隔离系统python环境，这里将不进行过多叙述。</p>
<p>一般的我们的项目目录下会有文件requirements.txt，请在终端执行 pip3 install -r requirements.txt 用于安装第三方库。
在安装的过程中可能会出现一些驱动的问题，不同的环境可能不一样，请到该库相应的官网查看相应的处理办法。</p>
</div>
<div class="section" id="id2">
<h1>配置文件<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h1>
<p>本项目是可配置的，配置文件基本都是以toml格式的，相应语法请自行查询相应资料，这里将不进行大篇幅介绍。</p>
<div class="section" id="monitoring">
<h2>monitoring的项目配置<a class="headerlink" href="#monitoring" title="永久链接至标题">¶</a></h2>
<p>配置文件路径 <cite>conf/base.toml</cite></p>
<ol class="arabic simple">
<li><p>其中 <cite>secret_key</cite> 是session的加密密钥、而session存储在客服端、所以为两安全起见、<cite>secret_key</cite> 值在生产环境中必须更改</p></li>
<li><p>celery, 这里将配置celery队列存储的环境，及结果存储位置，当然还可以配置其他的，这里将不介绍。</p></li>
<li><p>数据库配置，主要修改db.params里面的数据库信息、如user,以及其他的。</p></li>
<li><p>远程浏览器配置，这里可以是selenium的服务地址，也可以是chromedriver的地址，建议使用chromedriver的地址，它将传入适当参数，即可支持远程，而selenium目前对chrome不支持远程。</p></li>
</ol>
<p>其他更多配置，请查看配置文件，那里有相应的介绍。</p>
</div>
<div class="section" id="id3">
<h2>百度网盘爬虫配置<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>配置文件路径 <cite>conf/base.toml</cite></p>
<p>详细配置请看配置文件。</p>
<p>值得注意的是目前支持的邮箱只有qq邮箱和163邮箱、不同的邮箱对邮件内容的编码不一样，所以在解析验证码的时候会出错。
这里也要配置数据库，请按照需要配置。</p>
<p>日志这里也支持错误日志邮件，默认是注释，如有需求，自行配置。</p>
</div>
<div class="section" id="scrapyd">
<h2>scrapyd的配置<a class="headerlink" href="#scrapyd" title="永久链接至标题">¶</a></h2>
<p>配置方法请查看官网https://doc.scrapy.org/en/latest/topics/scrapyd.html</p>
</div>
<div class="section" id="chromedriver">
<h2>chromedriver 配置<a class="headerlink" href="#chromedriver" title="永久链接至标题">¶</a></h2>
<p>国内下载地址http://npm.taobao.org/mirrors/chromedriver/
配置方法请查看对应官网和版本。</p>
</div>
<div class="section" id="supervisord">
<h2>supervisord的配置<a class="headerlink" href="#supervisord" title="永久链接至标题">¶</a></h2>
<p>详细配置请查看官网http://supervisord.org/introduction.html</p>
<p>这里将管理我们已上的项目进程，用于方便启动，同时可以根据自己需求，将nginx、redis、postgresql、的启动也放入此处。</p>
</div>
</div>
<div class="section" id="id4">
<h1>运行<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h1>
<p>supervisord</p>
</div>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="../dev/index.html"
       title="上一章">← 开发文档</a>
  </li>
  <li class="next">
    <a href="example.html"
       title="下一章">项目部署记录 →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; 版权所有 2019, apuyuseng.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>.
</div>
            </div>
          </div>
      </page>
  </div></body>
</html>